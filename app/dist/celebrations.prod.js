"use strict";function _classCallCheck(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,i){for(var e=0;e<i.length;e++){var s=i[e];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}function _createClass(t,i,e){return i&&_defineProperties(t.prototype,i),e&&_defineProperties(t,e),t}var explode,fireworks={},filler={},bouncer={},tree={},aquarium={},bear={},stars={};latin.celebrations=[filler,bouncer,fireworks,tree,aquarium,bear,stars],function(){function t(){for(var h=0<arguments.length&&void 0!==arguments[0]?arguments[0]:12,t=[],i=function(t,i){var e=Math.sin(Math.PI/h*2*t+i),s=(Math.floor(127*e)+128).toString(16);return 1===s.length?"0"+s:s},e=0;e<h;e++){var s=i(e,0*Math.PI*2/3),a=i(e,2*Math.PI/3),r=i(e,2*Math.PI*2/3);t[e]="#"+s+r+a}return t}var e,s,h,a,r,n,o,l,c,u={el:document.getElementById("celebrationCanvas"),ctx:null,resize:function(){u.el.width=$(document).width(),u.el.height=$(window).height()},show:function(){$("body").css("overflow","hidden"),u.resize(),null===u.ctx&&(u.ctx=u.el.getContext("2d")),$(u.el).show()},hide:function(){$("body").css("overflow","auto"),$(u.el).hide()},getSize:function(){return{x:u.el.width=$(document).width(),y:u.el.height}}};function d(){var t,i;h&&(o&&u.ctx.clearRect(0,0,u.el.width,u.el.height),(i=u.ctx).fillStyle=a[r++%a.length],i.shadowColor="#333",i.shadowBlur=10,o&&(i.shadowOffsetX=c.width-l.minWidth,i.shadowOffsetY=c.height-l.minHeight,t=i.shadowOffsetX<i.shadowOffsetY?i.shadowOffsetX:i.shadowOffsetY,i.shadowBlur=Math.floor(t/2)),i.fillRect(c.x,c.y,c.width,c.height),c.width>=l.maxWidth?l.growWidth=!1:c.width<=l.minWidth&&(l.growWidth=!0),c.height>=l.maxHeight?l.growHeight=!1:c.height<=l.minHeight&&(l.growHeight=!0),c.height+=l.growHeight?l.growBy:-l.growBy,c.width+=l.growWidth?l.growBy:-l.growBy,c.x>=e-c.width?c.xStep=-n:c.x<=0&&(c.xStep=n),c.y>=s-c.height?c.yStep=-n:c.y<=0&&(c.yStep=n),c.x+=c.xStep,c.y+=c.yStep,window.requestAnimationFrame(d))}function i(){filler.resize(),h=!0,u.show(),d()}function f(){h=!1,u.hide()}function y(){e=$("#celebrations").width(),s=$("#celebrations").height(),c.x=Math.floor(Math.random()*(e-100)),c.y=Math.floor(Math.random()*(s-100)),u.resize()}!function(){var n=["#ffc000","#ff3b3b","#ff8400"];explode=function(t,i){var e=[],s=window.devicePixelRatio,h=document.createElement("canvas"),a=h.getContext("2d");h.style.position="absolute",h.style.left=t-100+"px",h.style.top=i-100+"px",h.style.pointerEvents="none",h.style.width="200px",h.style.height="200px",h.style.zIndex=100,h.width=200*s,h.height=200*s,document.body.appendChild(h);for(var r=0;r<25;r++)e.push({x:h.width/2,y:h.height/2,radius:l(20,30),color:n[Math.floor(Math.random()*n.length)],rotation:l(0,360,!0),speed:l(8,12),friction:.9,opacity:l(0,.5,!0),yVel:0,gravity:.1});o(e,a,h.width,h.height),setTimeout(function(){return document.body.removeChild(h)},1e3)};var o=function t(i,e,s,h){return requestAnimationFrame(function(){return t(i,e,s,h)}),e.clearRect(0,0,s,h),i.forEach(function(t,i){t.x+=t.speed*Math.cos(t.rotation*Math.PI/180),t.y+=t.speed*Math.sin(t.rotation*Math.PI/180),t.opacity-=.01,t.speed*=t.friction,t.radius*=t.friction,t.yVel+=t.gravity,t.y+=t.yVel,t.opacity<0||t.radius<0||(e.beginPath(),e.globalAlpha=t.opacity,e.fillStyle=t.color,e.arc(t.x,t.y,t.radius,0,2*Math.PI,!1),e.fill())}),e},l=function(t,i,e){return parseFloat((Math.random()*((t||1)-(i||0))+(i||0)).toFixed(e||0))}}(),function(){var o=0,l=0,i=0,e=0,t=0,h={r:255,g:0,b:0},s=!0,a=function(){function t(){_classCallCheck(this,t),this.reset()}return _createClass(t,[{key:"reset",value:function(){var t=400*Math.random()-200,i=400*Math.random()-200,e=800*Math.random()-200;this.x=t||0,this.y=i||0,this.z=e||0,this.particles=[];for(var s=0;s<200;s++)this.particles.push(new r(this.x,this.y,this.z,{r:h.r,g:h.g,b:h.b}))}},{key:"update",value:function(){var t=this.particles.length;this.particles.sort(function(t,i){return i.z-t.z});for(var i=0;i<t;i++)this.particles[i].update();this.particles.length<=0&&this.reset()}},{key:"render",value:function(t){for(var i=t.data,e=0;e<this.particles.length;e++){var s=this.particles[e],h=Math.sqrt((s.x-s.ox)*(s.x-s.ox)+(s.y-s.oy)*(s.y-s.oy)+(s.z-s.oz)*(s.z-s.oz));if(255<h&&(s.render=!1,this.particles.splice(e,1),this.particles.length--),s.render&&s.xPos<o&&0<s.xPos&&0<s.yPos&&s.yPos<l)for(var a=0;a<s.size;a++)for(var r,n=0;n<s.size;n++){s.xPos+a<o&&0<s.xPos+a&&0<s.yPos+n&&s.yPos+n<l&&(i[r=4*(~~(s.xPos+a)+~~(s.yPos+n)*o)]=s.color[0],i[1+r]=s.color[1],i[2+r]=s.color[2],i[3+r]=255-h)}}}}]),t}();function r(t,i,e,s){this.x=t,this.y=i,this.z=e,this.startX=this.x,this.startY=this.y,this.startZ=this.z,this.ox=this.x,this.oy=this.y,this.oz=this.z,this.xPos=0,this.yPos=0,this.vx=10*Math.random()-5,this.vy=10*Math.random()-5,this.vz=10*Math.random()-5,this.color=[s.r,s.g,s.b],this.render=!0,this.size=Math.round(+Math.random()+1)}function n(){if(s){c();for(var t=u.ctx.createImageData(o,l),i=0;i<30;i++)d[i].update(),d[i].render(t);u.ctx.putImageData(t,0,0),requestAnimationFrame(n)}}function c(){100<(t+=.6)&&(t=0),h.r=~~(127*Math.sin(.3*t+0)+128),h.g=~~(127*Math.sin(.3*t+2)+128),h.b=~~(127*Math.sin(.3*t+4)+128)}r.prototype.rotate=function(){var t=this.startX*Math.cos(180)-this.startY*Math.sin(180),i=this.startY*Math.cos(180)+this.startX*Math.sin(180);this.x=t,this.y=i},r.prototype.update=function(){var t;this.x=this.startX+=this.vx,this.y=this.startY+=this.vy,this.z=this.startZ-=this.vz,this.rotate(),this.vy+=.1,this.x+=this.vx,this.y+=this.vy,this.z-=this.vz,this.render=!1,-300<this.z&&(t=300/(300+this.z),this.size=2*t,this.xPos=e+this.x*t,this.yPos=i+this.y*t,this.render=!0)};for(var d=[],f=0;f<30;f++)c(),d.push(new a);fireworks.show=function(t){s=!0,u.show(t),o=u.getSize().x,l=u.getSize().y,i=l/2,e=o/2,n()},fireworks.hide=function(){s=!1,u.hide()},fireworks.resize=function(){u.resize()}}(),h=!0,a=t(40),l={maxWidth:150,minWidth:50,maxHeight:150,minHeight:50,growBy:8,growWidth:!(o=!(n=20)),growHeight:!(r=0)},c={x:0,y:0,xStep:n,yStep:n,height:100,width:100},filler.show=function(){o=!1,l.growBy=8,n=20,i()},filler.hide=f,filler.resize=y,bouncer.show=function(){o=!0,l.growBy=1,n=c.xStep=c.yStep=5,i()},bouncer.hide=f,bouncer.resize=y,function(){var r=!1,h=t(12),a=0;tree.show=function(t){r=!0,u.show(t),i()},tree.hide=function(){r=!1,u.hide()},tree.resize=function(){u.resize(),i()};var n=function(){function s(t,i){_classCallCheck(this,s),this.canvas=t[0],this.context=u.ctx,this.canvasWidth=t.width(),this.canvasHeight=t.height(),this.x=this.canvasWidth/2,this.y=this.canvasHeight,this.radius=10,this.speed=this.canvasWidth/500,this.angle=Math.PI/2,this.generation=0,this.lifespan=0,this.totalDistance=0,this.distance=0,this.depth=0,i&&(this.x=i.x,this.y=i.y,this.angle=i.angle,this.speed=i.speed,this.radius=.95*i.radius,this.generation=i.generation+1,this.fillStyle=i.fillStyle,this.totalDistance=i.totalDistance,this.depth=i.depth+1)}return _createClass(s,[{key:"split",value:function(){var t=(this.distance-this.canvasHeight/(0==this.generation?5:10))/100;if(Math.random()<t){for(var i=2+Math.round(2*Math.random()),e=0;e<i;e++)o.add(new s($(u.el),this));o.remove(this)}}},{key:"next",value:function(){this.draw(),this.iterate(),this.angle+=Math.random()/5-.1,this.split(),this.lifespan++,this.killBranchIfTooSmall()}},{key:"draw",value:function(){var t=this.context;t.save(),t.fillStyle="#333333",t.shadowColor="rgba(0, 0, 0, .3)",t.shadowBlur=8,t.shadowOffsetX=5,t.shadowOffsetY=5,t.beginPath(),t.moveTo(this.x,this.y),t.arc(this.x,this.y,this.radius,0,2*Math.PI,!0),t.closePath(),t.fill(),t.restore()}},{key:"iterate",value:function(){var t=this.x,i=this.y;this.x+=this.speed*Math.cos(this.angle),this.y+=this.speed*-Math.sin(this.angle),this.radius*=.99-this.generation/250;var e=Math.sqrt(Math.abs(t-this.x)+Math.abs(i-this.y));this.distance+=e,this.totalDistance+=e,this.speed>2*this.radius&&(this.speed=2*this.radius)}},{key:"killBranchIfTooSmall",value:function(){this.radius<.2&&(o.remove(this),this.drawLeaf(this.x,this.y))}},{key:"drawLeaf",value:function(t,i){var e=this.context;e.fillStyle=h[a++%h.length],e.strokeStyle=h[a%h.length],e.beginPath(),e.ellipse(t,i,3,9,this.angle,0,2*Math.PI),e.fill(),e.stroke()}}]),s}(),o={branches:[],next:function(){for(var t in o.branches)o.branches[t]&&o.branches[t].next()},add:function(t){o.branches.push(t)},remove:function(t){for(var i in o.branches)o.branches[i]===t&&o.branches.splice(i,1);o.branches.length||(r=!1)}};function i(){for(var t=$(u.el),i=t.width(),e=4+8*Math.random(),s=i/50,h=0;h<e;h++){var a=new n(t);a.x=i/2-s+h*s*2/e,a.radius=s,o.add(a)}!function t(){o.next(),r&&requestAnimationFrame(t)}()}}(),aquarium.show=function(t){$("#aquarium-celebration").show()},aquarium.hide=function(){$("#aquarium-celebration").hide()},bear.show=function(t){$("#bear-celebration").show()},bear.hide=function(){$("#bear-celebration").hide()},stars.show=function(t){$("#stars-celebration").show()},stars.hide=function(){$("#stars-celebration").hide()}}();